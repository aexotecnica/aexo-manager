insert into despiece (idProducto,idParte, cantidad, nivel,jerarquia, idParent)
values (1,1,1,0,'/',NULL),
(1,2,2,1,'/1/',1),
(1,3,1,2,'/1/1/',2),
(1,10,1,3,'/1/1/1/',3),
(1,11,1,3,'/1/1/2/',3),
(1,12,2,2,'/1/2/',2),
(1,14,2,3,'/1/2/1/',6),
(2,25,1,1,'/2/',1),
(3,80,2,3,'/3/1/3/',13),
(3,115,4,5,'/3/2/1/1/2/',14),
(3,245,2,3,'/3/1/4/',13),
(3,248,4,5,'/3/2/1/1/3/',14),
(3,436,1,2,'/3/1/',30),
(3,441,1,4,'/3/2/1/1/',20),
(3,443,1,2,'/3/3/',30),
(3,443,1,3,'/3/3/2/',15),
(3,443,1,4,'/3/3/2/2/',16),
(3,443,1,5,'/3/3/2/2/2/',17),
(3,787,4,5,'/3/2/1/1/1/',14),
(3,830,1,3,'/3/2/1/',37),
(3,1153,3,4,'/3/3/1/1/',25),
(3,1153,3,5,'/3/3/2/1/1/',26),
(3,1153,3,6,'/3/3/2/2/1/1/',27),
(3,1153,3,7,'/3/3/2/2/2/1/1/',28),
(3,1158,2,3,'/3/3/1/',15),
(3,1158,2,4,'/3/3/2/1/',16),
(3,1158,2,5,'/3/3/2/2/1/',17),
(3,1158,2,6,'/3/3/2/2/2/1/',18),
(3,1341,2,3,'/3/1/5/',13),
(3,1430,1,1,'/3/',1),
(3,1624,3,4,'/3/3/1/2/',25),
(3,1624,3,5,'/3/3/2/1/2/',26),
(3,1624,3,6,'/3/3/2/2/1/2/',27),
(3,1624,3,7,'/3/3/2/2/2/1/2/',28),
(3,1697,2,3,'/3/1/1/',13),
(3,1876,4,4,'/3/1/3/1/',9),
(3,2298,1,2,'/3/2/',30),
(7,443,1,2,'/4/2/',41),
(7,1153,3,4,'/4/2/1/1/',40),
(7,1158,2,3,'/4/2/1/',38),
(7,1431,1,1,'/4/',1),
(7,1624,3,4,'/4/2/1/2/',40),
(7,2257,2,2,'/4/1/',41)


select idDespiece, idProducto, idParte, idParent from despiece where idDespiece in (GetFamilyTree(159)) 
select distinct GetAncestry(152) from despiece

select GetFamilyTree(159)

select idDespiece, idProducto, idParte, idParent from despiece where idDespiece in (142,144,166,138,140,158,164,145,154,149,165,146,155,150,160,143,147,156,151,161,139,141,148,157,152,162,153,163)

SELECT
  distinct SUBSTRING_INDEX(SUBSTRING_INDEX(GetFamilyTree(159), ',', n.digit+1), ',', -1) hijos
FROM
  despiece
  INNER JOIN
  (SELECT 0 digit UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3) n



SELECT CONCAT('INSERT INTO t1 VALUES ("', REPLACE(REPLACE(TRIM(GetFamilyTree(159)), '"', '\\"'), ' ', '", "'), '")') FROM t2_with_string

select strSplit(GetFamilyTree(159),',',9)




